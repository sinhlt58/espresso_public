name: "v2_vocabulary"

config:
  topology.workers: 1

  # spout read from ES
  spout.min.delay.queries: 2000
  spout.ttl.purgatory: 30

  es.analysis.addresses: "localhost:9200"
  es.analysis.index.name: "v2_index"
  es.analysis.doc.type: "_doc"
  #es.analysis.user: "USERNAME"
  #es.analysis.password: "PASSWORD"

  es.analysis.status.field: "vocb_status"
  es.analysis.done: "done"
  es.analysis.max.hit: 50

  # Write after analysis
  es.indexer.addresses: "localhost:9200"
  es.indexer.index.name: "v2_analysis"
  es.indexer.doc.type: "_doc"
  es.indexer.bulkActions: 500
  es.indexer.flushInterval: "1s"
  es.indexer.concurrentRequests: 5

  # Write after analysis
  es.status.addresses: "localhost:9200"
  es.status.index.name: "v2_index"
  es.status.doc.type: "_doc"
  es.status.bulkActions: 500
  es.status.flushInterval: "1s"
  es.status.concurrentRequests: 5

spouts:
  - id: "spout"
    className: "com.uet.nlp.spout.AggregationSpout"
    parallelism: 1

bolts:
  - id: "preprocessreview"
    className: "com.uet.nlp.nlp_analytics.PreprocessReviewBolt"
    parallelism: 3

  - id: "normalizer"
    className: "com.uet.nlp.nlp_analytics.NormalizerBolt"
    parallelism: 3

  - id: "removeduplicate"
    className: "com.uet.nlp.nlp_analytics.RemoveDuplicateBolt"
    parallelism: 3

  - id: "indexer"
    className: "com.uet.nlp.indexing.IndexerBolt"
    parallelism: 3

  - id: "status"
    className: "com.uet.nlp.indexing.StatusUpdateBolt"
    parallelism: 1

streams:
  - from: "spout"
    to: "preprocessreview"
    grouping:
      type: SHUFFLE

  - from: "preprocessreview"
    to: "normalizer"
    grouping:
      type: SHUFFLE

  - from: "normalizer"
    to: "removeduplicate"
    grouping:
      type: SHUFFLE

  - from: "removeduplicate"
    to: "indexer"
    grouping:
      type: SHUFFLE

  - from: "indexer"
    to: "status"
    grouping:
      type: SHUFFLE